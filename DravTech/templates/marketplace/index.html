{% extends "base.html" %}
{% load static %}

{% block title %}Marketplace — DravTech{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'assets/css/marketplace-styles.css' %}">
{% endblock %}

{% block content %}

<!-- Marketplace Hero Section -->
<section id="marketplace-hero" class="hero-section">
  <div class="container">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">Marketplace</h1>
        <h2 class="hero-subtitle text-dark">Discover premium digital products, merchandise, and artwork</h2>
      </div>
      <div class="hero-actions">
        <a href="#featured-products" class="btn btn-primary btn-lg">
          <i class="bi bi-star"></i>
          Featured Products
        </a>
        <a href="#all-products" class="btn btn-outline-secondary btn-lg">
          <i class="bi bi-grid"></i>
          All Products
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Category Filter Section -->
<section class="category-filter-section">
  <div class="container">
    <div class="filter-tabs">
      <button class="filter-tab active" data-category="all">
        <i class="bi bi-grid-3x3-gap"></i>
        All Products
      </button>
      <button class="filter-tab" data-category="digital">
        <i class="bi bi-laptop"></i>
        Digital Products
      </button>
      <button class="filter-tab" data-category="merch">
        <i class="bi bi-bag"></i>
        Merchandise
      </button>
      <button class="filter-tab" data-category="artwork">
        <i class="bi bi-palette"></i>
        Artwork
      </button>
    </div>
  </div>
</section>

<!-- Products Section -->
<section id="all-products" class="products-section">
  <div class="container">

    <!-- ── ALL PRODUCTS ─────────────────────────────────────────── -->
    <div class="category-section active" data-category="all">
      <div class="section-header">
        <h2>All Products</h2>
        <p class="section-subtitle">Browse our complete collection</p>
      </div>
      <div class="row g-4">
        {% for product in all_products %}
          <div class="col-lg-4 col-md-6" data-aos="fade-up">
            {% include "marketplace/partials/product_card.html" %}
          </div>
        {% empty %}
          <div class="col-12 text-center">
            <p class="text-muted">No products available.</p>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- ── DIGITAL ───────────────────────────────────────────────── -->
    <div class="category-section" data-category="digital">
      <div class="section-header">
        <h2><i class="bi bi-laptop"></i> Digital Products</h2>
        <p class="section-subtitle">Software, tools, and digital solutions</p>
      </div>
      <div class="row g-4">
        {% for product in all_products %}
          {% if product.product_type == 'digital' %}
            <div class="col-lg-4 col-md-6" data-aos="fade-up">
              {% include "marketplace/partials/product_card.html" %}
            </div>
          {% endif %}
        {% empty %}
          <div class="col-12 text-center"><p class="text-muted">No digital products available.</p></div>
        {% endfor %}
      </div>
    </div>

    <!-- ── MERCHANDISE ───────────────────────────────────────────── -->
    <div class="category-section" data-category="merch">
      <div class="section-header">
        <h2><i class="bi bi-bag"></i> Merchandise</h2>
        <p class="section-subtitle">Physical products and branded items</p>
      </div>
      <div class="row g-4">
        {% for product in all_products %}
          {% if product.product_type == 'merch' %}
            <div class="col-lg-4 col-md-6" data-aos="fade-up">
              {% include "marketplace/partials/product_card.html" %}
            </div>
          {% endif %}
        {% empty %}
          <div class="col-12 text-center"><p class="text-muted">No merchandise available.</p></div>
        {% endfor %}
      </div>
    </div>

    <!-- ── ARTWORK ───────────────────────────────────────────────── -->
    <div class="category-section" data-category="artwork">
      <div class="section-header">
        <h2><i class="bi bi-palette"></i> Artwork</h2>
        <p class="section-subtitle">Original art and creative works</p>
      </div>
      <div class="row g-4">
        {% for product in all_products %}
          {% if product.product_type == 'artwork' %}
            <div class="col-lg-4 col-md-6" data-aos="fade-up">
              {% include "marketplace/partials/product_card.html" %}
            </div>
          {% endif %}
        {% empty %}
          <div class="col-12 text-center"><p class="text-muted">No artwork available.</p></div>
        {% endfor %}
      </div>
    </div>

  </div>
</section>

<!-- Category filter JS -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  const filterTabs       = document.querySelectorAll('.filter-tab');
  const categorySections = document.querySelectorAll('.category-section');

  filterTabs.forEach(tab => {
    tab.addEventListener('click', function () {
      const category = this.dataset.category;

      filterTabs.forEach(t => t.classList.remove('active'));
      this.classList.add('active');

      categorySections.forEach(section => {
        const show = category === 'all' || section.dataset.category === category;
        section.style.display = show ? 'block' : 'none';
        section.classList.toggle('active', show);
      });
    });
  });
});
</script>

{% endblock %}
