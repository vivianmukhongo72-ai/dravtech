<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>DravTech Solution</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
{% load static %}
  <!-- Favicons -->
  <link href="{% static 'assets/img/logo.jpeg' %}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="{%static 'assets/css/base.css'%}">
  {% block extra_css %}{% endblock %}

</head>

<body class="starter-page-page" data-default-img-fallback="{% static 'assets/img/logo.jpeg' %}">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container position-relative d-flex align-items-center justify-content-between">

      <a href="{% url 'home' %}" class="logo d-flex align-items-center me-auto me-xl-0">
        <!-- image logo -->
        <img src="{% static 'assets/img/logo.jpeg' %}" alt="DravTech logo">
        <h1 class="sitename">DRAVTECH</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'home' %}#hero">Home</a></li>
          <li><a href="{% url 'home' %}#services">Services</a></li>
          <li><a href="{% url 'home' %}#products">Products</a></li>
          <li><a href="{% url 'about' %}">About Us</a></li>
          <li><a href="{% url 'contact' %}">Contact</a></li>
          <li><a href="{% url 'marketplace:marketplace' %}">Marketplace</a></li>
          <li>
            <a href="{% url 'marketplace:cart' %}" class="cart-nav-link">
              <i class="bi bi-cart3"></i>
              Cart
              <span class="cart-badge" id="cart-count">0</span>
            </a>
          </li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  
    {% block content %}

    {% endblock %}
     

 <!-- Fixed Footer with Working Background Video -->
<footer id="footer" class="video-footer">
  <!-- Background Video -->
  <video class="footer-video-bg" autoplay muted loop playsinline>
    <source src="{% static 'assets/videos/dratech-team.mp4' %}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  
  <!-- Dark overlay for text readability -->
  <div class="video-overlay"></div>
  
  <!-- Footer Content (positioned above video) -->
  <div class="footer-content">
    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-3 col-md-6 footer-info">
          <a href="{% url 'home' %}" class="logo d-flex align-items-center mb-4">
            <span class="sitename">DRAVTECH</span>
          </a>
          <p>Leading IT solutions provider specializing in innovative technology services, cybersecurity, and software development.</p>
        </div>

        <div class="col-lg-2 col-md-6 footer-links">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'home' %}#services">Services</a></li>
            <li><a href="{% url 'home' %}#products">Products</a></li>
            <li><a href="{% url 'about' %}">About</a></li>
            <li><a href="{% url 'home' %}#portfolio">Projects</a></li>
            <li><a href="{% url 'contact' %}">Contact</a></li>
          </ul>
        </div>

        <div class="col-lg-3 col-md-6 footer-links">
          <h4>Services</h4>
          <ul>
            <li><a href="#">IT Support</a></li>
            <li><a href="#">Web Development</a></li>
            <li><a href="#">Cybersecurity</a></li>
            <li><a href="#">Software Engineering</a></li>
          </ul>
        </div>

        <div class="col-lg-4 col-md-6">
          <h4>Contact Info</h4>
          <ul class="contact-list">
            <li><i class="bi bi-envelope"></i> <a href="mailto:dravislotum@gmail.com">dravislotum@gmail.com</a></li>
            <li><i class="bi bi-telephone"></i> <a href="tel:+254758067458">+254 758 067 458</a></li>
            <li><i class="bi bi-geo-alt"></i> Chuka, Kenya</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container footer-bottom text-center">
      <div class="row gy-3">
        <div class="col-12">
          <div class="copyright">
            <p>Â© {{ current_year }} DRAVTECH. All rights reserved. ðŸš€ Powered by DRAVTECH</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scroll Top -->
  <!-- Floating contact buttons (WhatsApp + Phone) -->
  <div class="floating-contact" aria-hidden="false">
    <button class="fab whatsapp-btn" data-bs-toggle="modal" data-bs-target="#whatsappModal" aria-label="WhatsApp">
      <i class="bi bi-whatsapp"></i>
    </button>
    <button class="fab phone-btn" data-bs-toggle="modal" data-bs-target="#phoneModal" aria-label="Call us">
      <i class="bi bi-telephone"></i>
    </button>
  </div>

  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- WhatsApp Modal -->
  <div class="modal fade" id="whatsappModal" tabindex="-1" aria-labelledby="whatsappModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="whatsappModalLabel">Message us on WhatsApp</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Chat with our team for quick support and enquiries.</p>
          <p><strong>WhatsApp:</strong></p>
          <p><a class="btn btn-success w-100" href="https://wa.me/254758067458" target="_blank" rel="noopener">Open WhatsApp Chat <i class="bi bi-box-arrow-up-right"></i></a></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Phone Modal -->
  <div class="modal fade" id="phoneModal" tabindex="-1" aria-labelledby="phoneModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="phoneModalLabel">Call DravTech</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Speak directly with our team.</p>
          <p><strong>Phone:</strong></p>
          <p><a class="btn btn-primary w-100" href="tel:+254758067458">+254 758 067 458</a></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'assets/vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
  <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
  <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

  <!-- Cart Functionality -->
  <script>
    // Update cart badge on page load
    document.addEventListener('DOMContentLoaded', function() {
      updateCartBadge();
      setupCartEventListeners();
    });

    // Function to update cart badge
    function updateCartBadge() {
      // Get cart count from server
      getCartCount().then(count => {
        const cartBadge = document.getElementById('cart-count');
        if (cartBadge) {
          cartBadge.textContent = count;
          
          if (count > 0) {
            cartBadge.classList.remove('empty');
            cartBadge.classList.add('show');
          } else {
            cartBadge.classList.add('empty');
            cartBadge.classList.remove('show');
          }
        }
      });
    }

    // Function to get cart count from server
    async function getCartCount() {
      try {
        const response = await fetch('/marketplace/cart/count/');
        const data = await response.json();
        return data.count || 0;
      } catch (error) {
        console.error('Error fetching cart count:', error);
        return 0;
      }
    }

    // Update cart count from server
    async function updateCartCountFromServer() {
      const count = await getCartCount();
      const cartBadge = document.getElementById('cart-count');
      if (cartBadge) {
        cartBadge.textContent = count;
        
        if (count > 0) {
          cartBadge.classList.remove('empty');
          cartBadge.classList.add('show');
        } else {
          cartBadge.classList.add('empty');
          cartBadge.classList.remove('show');
        }
      }
    }

    // Setup event listeners for cart operations
    function setupCartEventListeners() {
      // Listen for add to cart clicks
      document.addEventListener('click', function(e) {
        if (e.target.matches('.add-to-cart-btn') || e.target.closest('.add-to-cart-btn')) {
          const btn = e.target.matches('.add-to-cart-btn') ? e.target : e.target.closest('.add-to-cart-btn');
          showCartNotification('Item added to cart!', 'success');
          // Update cart badge after a short delay
          setTimeout(updateCartBadge, 500);
        }
        
        // Listen for remove from cart clicks
        if (e.target.matches('.remove-from-cart-btn') || e.target.closest('.remove-from-cart-btn')) {
          showCartNotification('Item removed from cart!', 'info');
          // Update cart badge after a short delay
          setTimeout(updateCartBadge, 500);
        }
        
        // Listen for quantity changes
        if (e.target.matches('.quantity-btn') || e.target.matches('.quantity-input')) {
          // Update cart badge after a short delay
          setTimeout(updateCartBadge, 500);
        }
      });
    }

    // Show cart notification
    function showCartNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `cart-notification cart-notification-${type}`;
      notification.innerHTML = `
        <i class="bi bi-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
        ${message}
      `;
      
      // Add styles
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#28a745' : '#17a2b8'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        z-index: 9999;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 10px;
        animation: slideIn 0.3s ease;
      `;
      
      // Add animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `;
      document.head.appendChild(style);
      
      document.body.appendChild(notification);
      
      // Remove notification after 3 seconds
      setTimeout(() => {
        notification.style.animation = 'slideIn 0.3s ease reverse';
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 3000);
    }

    // Listen for cart updates (custom events from marketplace pages)
    document.addEventListener('cartUpdated', updateCartBadge);
    
    // Update cart count every 30 seconds (in case cart is updated in another tab)
    setInterval(updateCartCountFromServer, 30000);
  </script>

  <style>
    /* Floating contact buttons */
    .floating-contact { position: fixed; right: 1rem; bottom: 1rem; display:flex; flex-direction:column; gap:0.6rem; z-index:1080; }
    .fab { width:56px; height:56px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; border:none; box-shadow:0 6px 18px rgba(15,23,42,0.25); cursor:pointer; color:#fff; font-size:1.2rem; position:relative; overflow:hidden; }
    .whatsapp-btn { background: linear-gradient(180deg,#25D366,#1DA851); }
    .phone-btn { background: linear-gradient(180deg,#2563eb,#1e40af); }
    
    /* Playing animations */
    .fab.playing {
      animation: pulse 2s infinite, bounce 1s ease-in-out infinite;
    }
    
    .fab.playing::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
      border-radius: 50%;
      animation: rotate 2s linear infinite;
    }
    
    .fab.playing::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      transform: translate(-50%, -50%);
      animation: ripple 1.5s ease-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes ripple {
      0% { width: 0; height: 0; opacity: 1; }
      100% { width: 70px; height: 70px; opacity: 0; }
    }
    
    /* Modal animations */
    .modal.fade {
      transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    }
    
    .modal.fade.show {
      animation: modalSlideIn 0.4s ease-out;
    }
    
    @keyframes modalSlideIn {
      0% { 
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8) translateY(20px);
      }
      100% { 
        opacity: 1;
        transform: translate(-50%, -50%) scale(1) translateY(0);
      }
    }
    
    .modal-dialog {
      transform: translate(-50%, -50%);
      position: relative;
      left: 50%;
      top: 50%;
    }
    
    @media (max-width: 420px) { .floating-contact { right:0.5rem; bottom:0.75rem; } .fab { width:48px; height:48px; } }
  </style>

{% block extra_js %}
<script>
// Animated floating contact buttons
document.addEventListener('DOMContentLoaded', function() {
  const whatsappBtn = document.querySelector('.whatsapp-btn');
  const phoneBtn = document.querySelector('.phone-btn');
  const whatsappModal = document.getElementById('whatsappModal');
  const phoneModal = document.getElementById('phoneModal');
  
  // Add playing animations when modals are shown
  if (whatsappModal) {
    whatsappModal.addEventListener('show.bs.modal', function() {
      whatsappBtn.classList.add('playing');
      
      // Add sound effect (optional)
      playNotificationSound();
    });
    
    whatsappModal.addEventListener('hidden.bs.modal', function() {
      whatsappBtn.classList.remove('playing');
    });
  }
  
  if (phoneModal) {
    phoneModal.addEventListener('show.bs.modal', function() {
      phoneBtn.classList.add('playing');
      
      // Add sound effect (optional)
      playNotificationSound();
    });
    
    phoneModal.addEventListener('hidden.bs.modal', function() {
      phoneBtn.classList.remove('playing');
    });
  }
  
  // Optional: Add sound effect
  function playNotificationSound() {
    try {
      // Create a simple beep sound using Web Audio API
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = 800; // 800Hz tone
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    } catch (e) {
      // Fallback: silent if audio API not available
      console.log('Audio not available');
    }
  }
  
  // Add hover effects
  [whatsappBtn, phoneBtn].forEach(btn => {
    if (btn) {
      btn.addEventListener('mouseenter', function() {
        this.style.transform = 'scale(1.1) rotate(5deg)';
      });
      
      btn.addEventListener('mouseleave', function() {
        if (!this.classList.contains('playing')) {
          this.style.transform = 'scale(1) rotate(0deg)';
        }
      });
    }
  });
});
</script>
{% endblock %}

</body>

</html>